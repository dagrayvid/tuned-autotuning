apiVersion: v1
kind: Namespace
metadata:
  name: postgres-db
---
apiVersion: "local.storage.openshift.io/v1"
kind: "LocalVolume"
metadata:
  name: "local-disk-save"
  namespace: "openshift-local-storage" 
spec:
  nodeSelector: 
    nodeSelectorTerms:
    - matchExpressions:
        - key: hammerdb-sut
          operator: In
          values:
          - "database"
  storageClassDevices:
    - storageClassName: "local-sc-save" 
      volumeMode: Filesystem 
      fsType: xfs 
      devicePaths: 
        - /dev/nvme0n1
---
kind: PersistentVolumeClaim
apiVersion: v1
metadata:
    name: postgres-save-initialized-state
    namespace: postgres-db
spec:
    storageClassName: local-sc-save
    accessModes:
      - ReadWriteOnce
    volumeMode: Filesystem
    resources:
      requests:
        storage: 256Gi
---
apiVersion: "local.storage.openshift.io/v1"
kind: "LocalVolume"
metadata:
  name: "local-disk"
  namespace: "openshift-local-storage"
spec:
  nodeSelector:
    nodeSelectorTerms:
    - matchExpressions:
        - key: hammerdb-sut
          operator: In
          values:
          - "database"
  storageClassDevices:
    - storageClassName: "local-sc"
      volumeMode: Filesystem
      fsType: xfs
      devicePaths:
        - /dev/nvme1n1
---
kind: PersistentVolumeClaim
apiVersion: v1
metadata:
    name: postgres-persistent-storage
    namespace: postgres-db
spec:
    storageClassName: local-sc
    accessModes:
    - ReadWriteOnce
    volumeMode: Filesystem
    resources:
      requests:
        storage: 128Gi
